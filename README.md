# Weather

## 1. Описание

Это простая консольная утилита для получения погоды по указанному городу или автоматически по IP-адресу пользователя.

Программа написана на языке **Go** и предназначена для обучения и личного использования: работа с HTTP-запросами, CLI-флагами и модульными тестами.

---

## 2. Стек технологий

- **Язык:** Go (рекомендуется версия 1.24.1 или совместимая)
- **ОС:** Windows (PowerShell 7.5.2), Linux, macOS
- **Внешние API:**
  - `https://ipapi.co/json/` — определение города по IP
  - `https://countriesnow.space` — проверка существования города
  - `https://wttr.in/` — получение данных о погоде

---

## 3. Инструкция по установке

### Требования

- Установленный **Go** (1.24.1 или выше)
- **PowerShell 7.5.2** или другая консоль (Bash, CMD и т. д.)
- **Git**, если клонируете репозиторий

### Установка

1. Клонируйте репозиторий:

```powershell
git clone https://github.com/sq1er/weather.git
cd weather
```

---

## 4. Инструкция по использованию

### Запуск

Запуск программы без сборки:

```powershell
go run .
```

Сборка и запуск исполняемого файла:

```powershell
go build
.\weather.exe
```

### Доступные флаги

```
--city "Orel"     Город, для которого требуется получить погоду
--format 1        Формат вывода (доступные значения: 1, 2, 3; по умолчанию 1)
```

### Примеры

```powershell
# Погода в городе Орёл в формате 1
go run . --city "Orel" --format 1

# Погода в Брянске в формате 3
go run . --city "Bryansk" --format 3

# Автоопределение города по IP
go run .
```

---

## 5. Тестирование

В проекте есть модульные тесты для пакетов `geo` и `weather`.

Запуск тестов:

```powershell
go test .\weather\weather_test.go
```

---

## Частые проблемы

**not200**  
При обращении к внешнему API (например `https://ipapi.co/json/`) может вернуться код состояния HTTP отличный от 200. В этом случае функция `GetMyLocation` возвращает ошибку. Убедитесь, что у вас есть интернет, API доступен и не ограничен по частоте запросов.
При проверке существования города "Moscow" используется API `https://countriesnow.space`. Данный API не валидирует город, указывайте город "Moskva" для корректной работы утилиты.

---

## Автор

Проект создан в учебных целях.
Если у вас есть предложения или идеи по улучшению — создайте Issue или Pull Request на GitHub.
